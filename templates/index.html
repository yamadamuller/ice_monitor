<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Ice monitor</title>
        <link rel="icon" type="image/x-icon" href="https://nuem.ct.utfpr.edu.br/wp-content/uploads/2021/05/favicon.ico">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Text:wght@400;700&display=swap" rel="stylesheet">
        <style>
            body {
                font-family: 'Red Hat Text', sans-serif;
                text-align: justify;
                text-justify: inter-word;
                margin: 0;
                padding: 0;
                position: relative;
                min-height: 100vh;
            }

            .highlight-color{
                color: #4A88C3;
            }

            .content {
                max-width: 800px;
                margin: 100px auto 40px;
                padding: 0 20px;
                line-height: 1.6;
                font-size: 1.1rem;
                color: #333;
            }

            .fixed{
                position: fixed;
            }

            .top-0{
                top: 0;
            }

            .left-0{
                left: 0;
            }

            .right-0{
                right: 20;
            }

            .transition-all {
                transition-property: all;
                transition-timing-function: cubic-bezier(.4,0,.2,1);
                transition-duration: .15s;
            }

            .duration-300 {
                animation-duration: .3s;
            }

            .py-5 {
                padding-top: 1.25rem;
                padding-bottom: 1.25rem;
            }

             .items-center {
                align-items: center;
            }

            .img-responsive {
                max-width: 10%;
            }

            .ico_enhanced {
                width: 200%;
                height: 200%;
            }

            .heatmap-grid {
                display: grid;
                gap: 20px; /* spacing between columns */
            }

            .column-block {
                border: 2px solid #333; /* border around each column */
                padding: 10px;           /* space inside the border */
                border-radius: 5px;      /* optional: rounded corners */
                background-color: #f9f9f9; /* optional: background for better contrast */
            }

            .column-title {
                font-weight: bold;
                text-align: center;
                margin-bottom: 10px;
            }

            .heatmap-canvas {
                display: block;
                margin: 10px auto; /* spacing between canvases inside column */
                border: 1px solid #ccc; /* optional: border for individual canvas */
            }

        </style>
    </head>

    <body class="content" style="margin-left:500px;">
        <div>
             <a class="flex items-center" href="/">
                <img src="https://www.udiscovermusic.com/wp-content/uploads/2020/04/Ice-Cube-GettyImages-74305254.jpg"
                     alt="cube_logo" width="35%" height="35%">
            </a>
            <h1 class="highlight-color">Ice monitor</h1>
            Monitored file: <pre style="display:inline">{{ filename }}</pre><br>
            <button id="startBtn" onclick="startAcquisition()">Start monitoring</button>
            <button id="stopBtn"  onclick="stopAcquisition()" disabled>Stop monitoring</button>
        </div>

        <div id="plotsContainer"></div>

        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>


        <script>
            let stopUpdate = false;

            async function startAcquisition() {
                stopUpdate = false;
                document.getElementById("startBtn").disabled = true;
                document.getElementById("stopBtn").disabled = false;
                await fetch("/monitor_start");
                updatePlots();
            }

            async function stopAcquisition() {
                stopUpdate = true;
                document.getElementById("startBtn").disabled = false;
                document.getElementById("stopBtn").disabled = true;
                await fetch("/monitor_stop");
            }

        </script>
    </body>
</html>
